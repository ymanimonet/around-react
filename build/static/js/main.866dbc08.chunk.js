(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{13:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(5),c=a.n(s),i=(a(4),a(2)),o=a.p+"static/media/logo.4e8e0a1d.svg",l=a(0);var u=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{className:"header__logo",src:o,alt:"Around the US"})})},d=a.p+"static/media/edit.8667ac4a.svg",m=a(6),j=a(7),_=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(m.a)(this,e),this._baseUrl=a,this._headers=n}return Object(j.a)(e,[{key:"gatherUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"updateUserInfo",value:function(e){var t=e.name,a=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:a})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"updateAvatar",value:function(e){var t=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch(this._baseUrl+"/cards/likes/"+e,{method:t?"PUT":"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"20ab70d8-b14f-4271-bdde-c31cc9b6d660","Content-Type":"application/json"}}),f=r.a.createContext();var h=function(e){var t=e.card,a=e.handleCardClick,n=e.onCardLike,s=e.onCardDelete,c=e.setCardId,i=r.a.useContext(f),o=t.owner._id===i._id,u=t.likes.some((function(e){return e._id===i._id})),d="element__delete ".concat(o?"":"element__hidden"),m="element__heart ".concat(u?"element__heart_active":"");return Object(l.jsxs)("li",{className:"element",children:[Object(l.jsx)("button",{className:d,type:"button","aria-label":"delete",onClick:function(){c(t._id),s(t)}}),Object(l.jsx)("img",{className:"element__photo",src:t.link,alt:"unloadable",onClick:function(){a(t)}}),Object(l.jsxs)("div",{className:"element__container",children:[Object(l.jsx)("h2",{className:"element__title",children:t.name}),Object(l.jsxs)("div",{className:"element__likes",children:[Object(l.jsx)("button",{className:m,type:"button","aria-label":"heart",onClick:function(){n(t)}}),Object(l.jsx)("p",{className:"element__number",children:t.likes.length})]})]})]})};var b=function(e){var t=e.handleCardClick,a=e.onEditAvatar,n=e.onEditProfile,s=e.onAddPlace,c=e.setCardId,o=e.cardId,u=r.a.useState([]),m=Object(i.a)(u,2),j=m[0],b=m[1],p=r.a.useContext(f);function O(e){var t=e.likes.some((function(e){return e._id===p._id}));_.changeLikeCardStatus(e._id,!t).then((function(t){b((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))}function x(){_.removeCard(o).then((function(){var e=j.filter((function(e){return e._id!==o}));b(e)})).catch((function(e){return console.log(e)}))}return r.a.useEffect((function(){_.getInitialCards().then((function(e){b(e)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsxs)("main",{className:"content",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsx)("img",{className:"profile__pic",src:p.avatar,alt:"profile",onClick:a}),Object(l.jsx)("img",{className:"profile__pic-edit",src:d,alt:"edit button"}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsx)("h1",{className:"profile__title",children:p.name}),Object(l.jsx)("button",{className:"profile__edit",type:"button","aria-label":"edit",onClick:n}),Object(l.jsx)("p",{className:"profile__subtitle",children:p.about})]}),Object(l.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"add",onClick:s})]}),Object(l.jsx)("section",{className:"elements",children:Object(l.jsx)("ul",{className:"elements__list",children:j.map((function(e){return Object(l.jsx)(h,{card:e,link:e.link,name:e.name,likes:e.likes,handleCardClick:t,onCardLike:O,onCardDelete:x,setCardId:c},e._id)}))})})]})};var p=function(e){return Object(l.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container popup__container_type_".concat(e.name),children:[Object(l.jsx)("button",{className:"popup__close",type:"button","aria-label":"close",onClick:e.onClose}),Object(l.jsxs)("form",{className:"form form_type_".concat(e.name),name:e.name,onSubmit:e.onSubmit,children:[Object(l.jsx)("h2",{className:"form__title",children:e.title}),e.children,Object(l.jsx)("button",{className:"form__button",type:"submit","aria-label":e.name,children:e.submitButton})]})]})})};var O=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,s=r.a.useState(""),c=Object(i.a)(s,2),o=c[0],u=c[1],d=r.a.useState(""),m=Object(i.a)(d,2),j=m[0],_=m[1],h=r.a.useContext(f);return r.a.useEffect((function(){u(h.name),_(h.about)}),[h]),Object(l.jsx)(p,{name:"edit",title:"Edit Profile",submitButton:"Save",isOpen:t,onSubmit:function(e){e.preventDefault(),n({name:o,about:j})},onClose:a,children:Object(l.jsxs)("fieldset",{className:"form__text",children:[Object(l.jsx)("input",{id:"profile-name",className:"form__item form__item_field_name",type:"text",name:"name",placeholder:"Name",defaultValue:o,onChange:function(e){u(e.target.value)},minLength:2,maxLength:40,required:!0}),Object(l.jsx)("span",{id:"profile-name-error",className:"form__error"}),Object(l.jsx)("input",{id:"profile-text",className:"form__item form__item_field_description",type:"text",name:"about",placeholder:"About me",defaultValue:j,onChange:function(e){_(e.target.value)},minLength:2,maxLength:40,required:!0}),Object(l.jsx)("span",{id:"profile-text-error",className:"form__error"})]})})};var x=function(e){var t=e.card,a=e.onClose,n=e.isOpen;return Object(l.jsx)("div",{className:"popup popup_type_image ".concat(n&&"popup_opened"),children:Object(l.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(l.jsx)("button",{className:"popup__close",type:"button","aria-label":"close",onClick:a}),Object(l.jsxs)("figure",{className:"popup__figure",children:[Object(l.jsx)("img",{className:"popup__image",src:t.link,alt:"unloadable"}),Object(l.jsx)("figcaption",{className:"popup__image-title",children:t.name})]})]})})};var v=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__text",children:"\xa9 2020 Around The U.S."})})};var N=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],s=r.a.useState(!1),c=Object(i.a)(s,2),o=c[0],d=c[1],m=r.a.useState(!1),j=Object(i.a)(m,2),h=j[0],N=j[1],g=r.a.useState(!1),C=Object(i.a)(g,2),k=C[0],y=C[1],S=r.a.useState({}),E=Object(i.a)(S,2),U=E[0],P=E[1],T=r.a.useState(""),I=Object(i.a)(T,2),L=I[0],w=I[1],A=r.a.useState({name:"",about:""}),B=Object(i.a)(A,2),D=B[0],q=B[1];function J(){n(!1),d(!1),N(!1),y(!1),P({})}return r.a.useEffect((function(){_.gatherUserInfo().then((function(e){q(e)})).catch((function(e){console.log(e)}))}),[]),Object(l.jsx)(f.Provider,{value:D,children:Object(l.jsx)("div",{className:"root",children:Object(l.jsxs)("div",{className:"root__container",children:[Object(l.jsx)(u,{}),Object(l.jsx)(b,{onEditAvatar:function(){N(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){d(!0)},handleCardClick:function(e){P(e),y(!0)},setCardId:w,cardId:L}),Object(l.jsx)(O,{isOpen:a,onClose:J,onUpdateUser:function(e){console.log(D),console.log(e),_.updateUserInfo(e.name,e.about).then((function(e){q(e),J()})).catch((function(e){console.log(e)}))}}),Object(l.jsx)(p,{name:"add",title:"New Place",submitButton:"Create",isOpen:o,onClose:J,children:Object(l.jsxs)("fieldset",{className:"form__text",children:[Object(l.jsx)("input",{id:"card-title",className:"form__item form__item_field_title",type:"text",name:"name",placeholder:"Title",minLength:1,maxLength:30,required:!0}),Object(l.jsx)("span",{id:"card-title-error",className:"form__error"}),Object(l.jsx)("input",{id:"card-url",className:"form__item form__item_field_image-url",type:"url",name:"link",placeholder:"Image Link",required:!0}),Object(l.jsx)("span",{id:"card-url-error",className:"form__error"})]})}),Object(l.jsx)(p,{name:"avatar",title:"Change profile picture",submitButton:"Save",isOpen:h,onClose:J,children:Object(l.jsxs)("fieldset",{className:"form__text",children:[Object(l.jsx)("input",{id:"avatar-url",className:"form__item form__item_field_avatar-url",type:"url",name:"link",placeholder:"Image Link",required:!0}),Object(l.jsx)("span",{id:"avatar-url-error",className:"form__error"})]})}),Object(l.jsx)(p,{name:"delete",title:"Are you sure?",submitButton:"Yes"}),Object(l.jsx)(x,{card:U,isOpen:k,onClose:J}),Object(l.jsx)(v,{})]})})})},g=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,14)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),g()},4:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.866dbc08.chunk.js.map