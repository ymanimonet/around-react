(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{16:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(7),c=a.n(s),i=(a(6),a(10)),o=a(2),l=a.p+"static/media/logo.4e8e0a1d.svg",u=a(0);var d=function(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("img",{className:"header__logo",src:l,alt:"Around the US"})})},m=a.p+"static/media/edit.8667ac4a.svg",j=r.a.createContext();var f=function(e){var t=e.card,a=e.handleCardClick,n=e.onCardLike,s=e.onCardDelete,c=e.setCardId,i=r.a.useContext(j),o=t.owner._id===i._id,l=t.likes.some((function(e){return e._id===i._id})),d="element__delete ".concat(o?"":"element__hidden"),m="element__heart ".concat(l?"element__heart_active":"");return Object(u.jsxs)("li",{className:"element",children:[Object(u.jsx)("button",{className:d,type:"button","aria-label":"delete",onClick:function(){c(t._id),s(t)}}),Object(u.jsx)("img",{className:"element__photo",src:t.link,alt:"unloadable",onClick:function(){a(t)}}),Object(u.jsxs)("div",{className:"element__container",children:[Object(u.jsx)("h2",{className:"element__title",children:t.name}),Object(u.jsxs)("div",{className:"element__likes",children:[Object(u.jsx)("button",{className:m,type:"button","aria-label":"heart",onClick:function(){n(t)}}),Object(u.jsx)("p",{className:"element__number",children:t.likes.length})]})]})]})};var _=function(e){var t=e.handleCardClick,a=e.onEditAvatar,n=e.onEditProfile,s=e.onAddPlace,c=e.setCardId,i=e.onCardLike,o=e.onCardDelete,l=e.cards,d=r.a.useContext(j);return Object(u.jsxs)("main",{className:"content",children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsx)("img",{className:"profile__pic",src:d.avatar,alt:"profile",onClick:a}),Object(u.jsx)("img",{className:"profile__pic-edit",src:m,alt:"edit button"}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsx)("h1",{className:"profile__title",children:d.name}),Object(u.jsx)("button",{className:"profile__edit",type:"button","aria-label":"edit",onClick:n}),Object(u.jsx)("p",{className:"profile__subtitle",children:d.about})]}),Object(u.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"add",onClick:s})]}),Object(u.jsx)("section",{className:"elements",children:Object(u.jsx)("ul",{className:"elements__list",children:l.map((function(e){return Object(u.jsx)(f,{card:e,link:e.link,name:e.name,likes:e.likes,handleCardClick:t,onCardLike:i,onCardDelete:o,setCardId:c},e._id)}))})})]})};var b=function(e){return Object(u.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(u.jsxs)("div",{className:"popup__container popup__container_type_".concat(e.name),children:[Object(u.jsx)("button",{className:"popup__close",type:"button","aria-label":"close",onClick:e.onClose}),Object(u.jsxs)("form",{className:"form form_type_".concat(e.name),name:e.name,onSubmit:e.onSubmit,children:[Object(u.jsx)("h2",{className:"form__title",children:e.title}),e.children,Object(u.jsx)("button",{className:"form__button",type:"submit","aria-label":e.name,children:e.submitButton})]})]})})};var h=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,s=r.a.useState(""),c=Object(o.a)(s,2),i=c[0],l=c[1],d=r.a.useState(""),m=Object(o.a)(d,2),f=m[0],_=m[1],h=r.a.useContext(j);return r.a.useEffect((function(){l(h.name),_(h.about)}),[h]),Object(u.jsx)(b,{name:"edit",title:"Edit Profile",submitButton:"Save",isOpen:t,onSubmit:function(e){e.preventDefault(),n({name:i,about:f})},onClose:a,children:Object(u.jsxs)("fieldset",{className:"form__text",children:[Object(u.jsx)("input",{id:"profile-name",className:"form__item form__item_field_name",type:"text",name:"name",placeholder:"Name",defaultValue:i,onChange:function(e){l(e.target.value)},minLength:2,maxLength:40,required:!0}),Object(u.jsx)("span",{id:"profile-name-error",className:"form__error"}),Object(u.jsx)("input",{id:"profile-text",className:"form__item form__item_field_description",type:"text",name:"about",placeholder:"About me",defaultValue:f,onChange:function(e){_(e.target.value)},minLength:2,maxLength:40,required:!0}),Object(u.jsx)("span",{id:"profile-text-error",className:"form__error"})]})})};var p=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,s=r.a.useRef();return Object(u.jsx)(b,{name:"avatar",title:"Change profile picture",submitButton:"Save",isOpen:t,onSubmit:function(e){e.preventDefault(),n({avatar:s.current.value})},onClose:a,children:Object(u.jsxs)("fieldset",{className:"form__text",children:[Object(u.jsx)("input",{ref:s,id:"avatar-url",className:"form__item form__item_field_avatar-url",type:"url",name:"link",placeholder:"Image Link",required:!0}),Object(u.jsx)("span",{id:"avatar-url-error",className:"form__error"})]})})};var O=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,s=r.a.useState(""),c=Object(o.a)(s,2),i=c[0],l=c[1],d=r.a.useState(""),m=Object(o.a)(d,2),j=m[0],f=m[1];return Object(u.jsx)(b,{name:"add",title:"New Place",submitButton:"Create",isOpen:t,onSubmit:function(e){e.preventDefault(),n({name:i,link:j})},onClose:a,children:Object(u.jsxs)("fieldset",{className:"form__text",children:[Object(u.jsx)("input",{onChange:function(e){l(e.target.value)},id:"card-title",className:"form__item form__item_field_title",type:"text",value:i,name:"name",placeholder:"Title",minLength:1,maxLength:30,required:!0}),Object(u.jsx)("span",{id:"card-title-error",className:"form__error"}),Object(u.jsx)("input",{onChange:function(e){f(e.target.value)},id:"card-url",className:"form__item form__item_field_image-url",type:"url",value:j,name:"link",placeholder:"Image Link",required:!0}),Object(u.jsx)("span",{id:"card-url-error",className:"form__error"})]})})};var x=function(e){var t=e.card,a=e.onClose,n=e.isOpen;return Object(u.jsx)("div",{className:"popup popup_type_image ".concat(n&&"popup_opened"),children:Object(u.jsxs)("div",{className:"popup__container popup__container_type_image",children:[Object(u.jsx)("button",{className:"popup__close",type:"button","aria-label":"close",onClick:a}),Object(u.jsxs)("figure",{className:"popup__figure",children:[Object(u.jsx)("img",{className:"popup__image",src:t.link,alt:"unloadable"}),Object(u.jsx)("figcaption",{className:"popup__image-title",children:t.name})]})]})})};var v=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__text",children:"\xa9 2020 Around The U.S."})})},C=a(8),g=a(9),N=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(C.a)(this,e),this._baseUrl=a,this._headers=n}return Object(g.a)(e,[{key:"gatherUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"updateUserInfo",value:function(e){var t=e.name,a=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:a})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"updateAvatar",value:function(e){var t=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch(this._baseUrl+"/cards/likes/"+e,{method:t?"PUT":"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject(new Error(e.statusText))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"20ab70d8-b14f-4271-bdde-c31cc9b6d660","Content-Type":"application/json"}});var k=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],s=r.a.useState(!1),c=Object(o.a)(s,2),l=c[0],m=c[1],f=r.a.useState(!1),C=Object(o.a)(f,2),g=C[0],k=C[1],y=r.a.useState(!1),S=Object(o.a)(y,2),P=S[0],U=S[1],E=r.a.useState({}),L=Object(o.a)(E,2),T=L[0],A=L[1],I=r.a.useState(""),w=Object(o.a)(I,2),D=w[0],B=w[1],q=r.a.useState([]),J=Object(o.a)(q,2),F=J[0],H=J[1],V=r.a.useState({name:"",about:"",avatar:""}),z=Object(o.a)(V,2),M=z[0],R=z[1];function Y(){n(!1),m(!1),k(!1),U(!1),A({})}return r.a.useEffect((function(){Promise.all([N.gatherUserInfo(),N.getInitialCards()]).then((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];R(a),H(n)}))}),[]),Object(u.jsx)(j.Provider,{value:M,children:Object(u.jsx)("div",{className:"root",children:Object(u.jsxs)("div",{className:"root__container",children:[Object(u.jsx)(d,{}),Object(u.jsx)(_,{onEditAvatar:function(){k(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){m(!0)},handleCardClick:function(e){A(e),U(!0)},setCardId:B,cardId:D,cards:F,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===M._id}));N.changeLikeCardStatus(e._id,!t).then((function(t){H((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(){N.removeCard(D).then((function(){var e=F.filter((function(e){return e._id!==D}));H(e)})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(h,{isOpen:a,onClose:Y,onUpdateUser:function(e){N.updateUserInfo(e).then((function(e){R(e),Y()})).catch((function(e){console.log(e)}))}}),Object(u.jsx)(p,{isOpen:g,onClose:Y,onUpdateAvatar:function(e){N.updateAvatar(e).then((function(e){R(e),Y()})).catch((function(e){console.log(e)}))}}),Object(u.jsx)(O,{isOpen:l,onClose:Y,onAddPlace:function(e){var t=e.name,a=e.link;N.addCard({name:t,link:a}).then((function(e){H([e].concat(Object(i.a)(F))),Y()})).catch((function(e){console.log(e)}))}}),Object(u.jsx)(b,{name:"delete",title:"Are you sure?",submitButton:"Yes"}),Object(u.jsx)(x,{card:T,isOpen:P,onClose:Y}),Object(u.jsx)(v,{})]})})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),y()},6:function(e,t,a){}},[[16,1,2]]]);
//# sourceMappingURL=main.082dd4fe.chunk.js.map